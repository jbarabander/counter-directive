"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ng-counter-directive"),function(t){"use strict";var e=t.module("ng-counter-directive",["ui.bootstrap","vs-repeat"]);e.directive("counter",function(){return{restrict:"E",template:'<div class="btn-group" uib-dropdown is-open="status.isopen"><button class="btn btn-default" ng-click="goDownOneStep()">-</button><button id="single-button" type="button" class="btn btn-primary text-center" uib-dropdown-toggle ng-disabled="disabled" ng-click="setNewScrollTop()">{{quantityIsNonZeroFalsey() ? "Choose a quantity": quantity}}</button><button class="btn btn-default" ng-click="goUpOneStep()">+</button><ul vs-repeat class="uib-dropdown-menu scrollable-dropdown" role="menu" aria-labelledby="single-button"><li ng-repeat="option in options track by $index" ng-click="setInputTo(option, $index)"><a ng-style="{{style}}">{{option}}</a></li></ul></div>',scope:{max:"=",min:"=",step:"=",quantity:"=",cellHeight:"@",clears:"@"},link:function(t,e,n){function o(t){var e=/^\d*\.*\d+px$/,n=/^\d*\.*\d+pt$/,o=/^\d*\.*\d+cm$/,i=/^\d*\.*\d+in$/,a=/^\d*\.*\d+pc$/;return e.test(t)?Math.round(parseFloat(t.replace("px",""))):n.test(t)?Math.round(4/3*parseFloat(t.replace("pt",""))):o.test(t)?Math.round(37.8*parseFloat(t.replace("cm",""))):i.test(t)?Math.round(96*parseFloat(t.replace("in",""))):a.test(t)?Math.round(12*parseFloat(t.replace("pc",""))):parseFloat(t)}function i(){return t.quantity+t.step>=t.max}function a(){return t.quantity-t.step<=t.min}t.clearsIsBlank=""===t.clears,t.clearsIsUndef=void 0===t.clears,t.scrollOffset=0,t.minClear=!1,t.clearsIsBlank?t.minClear=!0:t.clearsIsUndef||(t.scrollOffset=1),t.elementHeight=o(t.cellHeight)?o(t.cellHeight):26,t.style={height:t.elementHeight+"px"},t.dropdown=e.children()[0].lastElementChild,t.quantityIsNonZeroFalsey=function(){return null===t.quantity||void 0===t.quantity},t.options=_.range(t.min,t.max,t.step),t.clearsIsBlank||t.clearsIsUndef||t.options.unshift(t.clears),t.setNewScrollTop=function(){t.dropdown.scrollTop=t.quantityIsNonZeroFalsey()?0:(t.quantity-t.min+t.scrollOffset)/t.step*t.elementHeight},t.goUpOneStep=function(){if(t.quantityIsNonZeroFalsey())t.quantity=t.minClear?t.min+t.step:t.min;else if(i())t.quantity=t.max;else{var e=t.options.indexOf(t.quantity)+1;t.quantity=t.options[e]}},t.goDownOneStep=function(){if(t.quantityIsNonZeroFalsey()||a())t.quantity=!t.clearsIsBlank&&!t.clearsIsUndef&&t.quantity===t.min||t.minClear?null:t.min;else{var e=t.options.indexOf(t.quantity)-1;t.quantity=t.options[e]}},-1===t.options.indexOf(t.max)&&t.options.push(t.max),t.setInputTo=function(e,n){e===t.min&&t.minClear||!t.minClear&&!t.clearsIsUndef&&e===t.clears&&0===n?t.quantity=null:t.quantity=e}}}})}(window.angular);